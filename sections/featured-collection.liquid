<section class="container">
  <div class="section-title">
    <h2>{{ section.settings.title }}</h2>
  </div>

  <div class="product-grid">
    {%- for product in section.settings.collection.products limit: section.settings.products_to_show -%}
      <div class="product-card">
        <a href="{{ product.url }}" class="product-card__link">
          <div class="product-card__image">
            <img src="{{ product.featured_image | image_url: width: 600 }}" alt="{{ product.title }}">
          </div>
          <div class="product-card__category">{{ product.collections.first.title }}</div>
          <h3 class="product-card__title">{{ product.title }}</h3>
          <div class="product-card__price">{{ product.price | money }}</div>
        </a>
      </div>
    {%- else -%}
      {%- assign placeholder_images = 'placeholder-ruby.png,placeholder-emerald.png,placeholder-sapphire.png,placeholder-diamond.png' | split: ',' -%}
      {%- for i in (1..4) -%}
        {%- assign img_index = i | minus: 1 -%}
        <div class="product-card">
          <div class="product-card__image" style="background: #fdfcfb;">
            <img src="{{ placeholder_images[img_index] | asset_url }}" alt="Gemstone {{ i }}" style="width: 100%; height: 100%; object-fit: contain; padding: 10%;">
          </div>
          <div class="product-card__category">Gemstone</div>
          <h3 class="product-card__title">Natural Faceted Gemstone {{ i }}</h3>
          <div class="product-card__price">$1,{{ i }}50.00</div>
        </div>
      {%- endfor -%}
    {%- endfor -%}
  </div>
</section>

{% schema %}
{
  "name": "Featured Collection",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Featured Products"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 12,
      "step": 4,
      "default": 4,
      "label": "Products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Collection"
    }
  ]
}
{% endschema %}
